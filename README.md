Trevor Paley
[http://a3-trevor-paley.glitch.me/]()


## General Info

This is a web-based instant messaging service that allows you to register an account and then privately talk to any other user on the platform.

User interface was by far the hardest part of this project. Getting elements to lay out properly and animate smoothly was extremely challenging, and I was working with an unfamiliar javascript framework, React. With that said, except for a few visual hiccups on mobile, the application looks and feels pretty good.

Basic authentication is used with hashed passwords for simplicity both of implementation and of user interface. Hashing is done by the client and is not salted. Users should always use HTTPS except during development.

This application uses Material Design (since it looks pretty) via [Material-UI](https://material-ui.com/) and React. Some additional CSS-in-JS (via Material-UI) is used for layout, though there are no major modifications to the framework.

These Express middlewares were used:
* `passport`/`passport-http`: This is used to manage basic authentication. It was used instead of a purely home-made middleware because I was planning on maybe adding GitHub OAUTH support, but I never ended up doing that.
* `cors`: Clarifies in headers that the site and all endpoints should be available to all origins.
* `helmet`: Adds various security featuers including recommending that browsers use HTTPS.
* `body-parser`: For parsing the bodies of POST requests into Javascript objects
* `express-static-gzip`: For serving the brotli-compressed files generated by webpack. Despite its name, this middleware is _not_ being used for serving gzipped files.

## Technical Achievements

* Webpack is used to Brotli-compress (Brotli-ify? Brotlize?) all output to achieve significant reductions in filesize, making the site load substantially faster than it would otherwise and cause significantly less strain on slower network connections. Brotli is used over gzip because it yield superior levels of compression for text data.
* User login details are stored by the client in localStorage and are automatically sent to the server for validation when the page loads so that the user can be automatically logged in.
* When a conversation is open, the client frequently polls the server to get any new messages, so two people can chat in realtime without needing to refresh the page.
* Convesations start scrolled to the bottom and stick to the bottom when they are scrolled to the bottom. This is far harder to implement than it should be. 

## Design Achievements

* Works on mobile with an adjusted user interface to support the thinner screen. Some visual hiccups exist on mobile during transitions, but the site is otherwise fully responsive.
* A dark and light theme toggle is available to give people the user experience they prefer, and the site will automatically detect your browser/system settings to set the brightness theme upon page load.
* Skeleton elements are placed in conversations and the user list before the data has been recieved from the server. This conveys to the user that the site is loading. In some cases there are also loading bars (e.g. when logging in) and loading circles (e.g. when sending a message).

## Building, Running, and Developing

Install packages
```sh
npm install
cd server
npm install
# Remember to return to the parent directory when done
```
Build for production:
```sh
npm run build
```
Run server:
```sh
npm start
```
Watch for development:
```sh
npm run watch
```
Run server ONLY with nodemon (for development):
```sh
cd server
npm run watch
```
